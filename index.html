<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Where2Watch ‚Äì Sport heute im TV & Stream</title>
  <meta name="description" content="Live-Sport im √úberblick ‚Äì TV & Streaming auf einen Blick. Kostenlos & t√§glich aktualisiert.">

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet" />

  <style>
body {
  font-family: 'Inter', sans-serif;
  background-color: #f9f9fb;
  margin: 0;
  padding: 0 1rem;
}

h1 {
  color: #0077ff;
  text-align: center;
  font-size: 2.5rem;
  margin-top: 2rem;
}

p {
  text-align: center;
  color: #555;
}

.sport-section {
  margin: 2rem 0;
}

.sport-section h2 {
  margin-bottom: 1rem;
  padding-left: 0.75rem;
  font-size: 1.5rem;
  background-color: #fff;
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
  padding: 0.5rem 1rem;
  border-radius: 0.5rem;
}

.card-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 1rem;
}

.card {
  background-color: #ffffff;
  border-radius: 1rem;
  box-shadow: 0 4px 6px rgba(0,0,0,0.05);
  padding: 1rem;
  transition: transform 0.2s, box-shadow 0.3s;
}

.card:hover {
  transform: scale(1.02);
  box-shadow: 0 6px 12px rgba(0,0,0,0.1);
}

.card-time {
  font-size: 1.2rem;
  font-weight: bold;
  color: #333;
}

.card-title {
  margin-top: 0.5rem;
  font-size: 1rem;
  font-weight: 500;
}

.card-sender {
  margin-top: 0.25rem;
  color: #888;
  font-size: 0.9rem;
}

/* Responsiv */
@media (max-width: 600px) {
  h1 {
    font-size: 2rem;
  }

  .card-time {
    font-size: 1rem;
  }

  .card-title {
    font-size: 0.95rem;
  }
}
</style>
</head>

<body>

<header>
  <h1>Where2Watch</h1>
  <p>Live-Sport heute im TV & Stream</p>
</header>

<div class="cta">
  <button class="cta-button">üìÖ Kalender-Export (bald verf√ºgbar)</button>
</div>

<main class="grid" id="eventGrid">
  <!-- Inhalte werden durch JavaScript geladen -->
</main>

<footer>
  <a href="pages/impressum.html">Impressum</a> |
  <a href="pages/datenschutz.html">Datenschutz</a>
</footer>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    loadEvents();
  });
  
  async function loadEvents() {
    const today = new Date().toISOString().split("T")[0];
    const url = `sports_schedule_${today}.json`;
  
    const sportColors = {
      Fu√üball: "#28a745",
      Radsport: "#fd7e14",
      Handball: "#007bff",
      Basketball: "#8e44ad",
      Tennis: "#c0392b",
      Unbekannt: "#6c757d"
    };
  
    const sportIcons = {
      Fu√üball: "‚öΩ",
      Radsport: "üö¥",
      Handball: "ü§æ",
      Basketball: "üèÄ",
      Tennis: "üéæ",
      Unbekannt: "üì∫"
    };
  
    try {
      const response = await fetch(url);
      if (!response.ok) throw new Error(`HTTP error ${response.status}`);
      const data = await response.json();
  
      const container = document.getElementById("eventsContainer");
      container.innerHTML = "";
  
      if (!data.events || data.events.length === 0) {
        container.innerHTML = "<p>Heute sind keine Daten verf√ºgbar.</p>";
        return;
      }
  
      // 1. Gruppieren nach Sportart
      const groupedEvents = {};
      for (const event of data.events) {
        const sport = event.sport || "Unbekannt";
        if (!groupedEvents[sport]) groupedEvents[sport] = [];
        groupedEvents[sport].push(event);
      }
  
      // 2. Rendern je Gruppe
      for (const [sport, events] of Object.entries(groupedEvents)) {
        events.sort((a, b) => (a.time || "").localeCompare(b.time || ""));
  
        const section = document.createElement("div");
        section.className = "sport-section";
  
        const header = document.createElement("h2");
        header.innerHTML = `${sportIcons[sport] || "üì∫"} ${sport}`;
        header.style.borderLeft = `6px solid ${sportColors[sport] || "#6c757d"}`;
        section.appendChild(header);
  
        const grid = document.createElement("div");
        grid.className = "card-grid";
  
        for (const event of events) {
          const card = document.createElement("div");
          card.className = "card";
          card.style.borderLeft = `5px solid ${sportColors[sport] || "#6c757d"}`;
  
          const time = document.createElement("div");
          time.className = "card-time";
          time.textContent = event.time || "";
  
          const title = document.createElement("div");
          title.className = "card-title";
          title.textContent = `${event.title}`;
  
          const sender = document.createElement("div");
          sender.className = "card-sender";
          sender.textContent = event.sender || "";
  
          card.append(time, title, sender);
          grid.appendChild(card);
        }
  
        section.appendChild(grid);
        container.appendChild(section);
      }
  
    } catch (error) {
      console.error("‚ùå Fehler beim Laden der Daten:", error);
      document.getElementById("eventsContainer").innerHTML =
        "<p>Heute sind keine Daten verf√ºgbar.</p>";
    }
  }
  </script>  

</body>
</html>
